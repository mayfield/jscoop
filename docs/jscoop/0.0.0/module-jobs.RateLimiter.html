<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>RateLimiter - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-futures.Future.html">Future</a><ul class='methods'><li data-type='method'><a href="module-futures.Future.html#done">done</a></li><li data-type='method'><a href="module-futures.Future.html#error">error</a></li><li data-type='method'><a href="module-futures.Future.html#result">result</a></li><li data-type='method'><a href="module-futures.Future.html#setError">setError</a></li><li data-type='method'><a href="module-futures.Future.html#setResult">setResult</a></li></ul></li><li><a href="module-jobs.BufferedWork.html">BufferedWork</a><ul class='methods'><li data-type='method'><a href="module-jobs.BufferedWork.html#asCompleted">asCompleted</a></li><li data-type='method'><a href="module-jobs.BufferedWork.html#enqueue">enqueue</a></li></ul></li><li><a href="module-jobs.RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method'><a href="module-jobs.RateLimiter.html#.singleton">singleton</a></li><li data-type='method'><a href="module-jobs.RateLimiter.html#getState">getState</a></li><li data-type='method'><a href="module-jobs.RateLimiter.html#increment">increment</a></li><li data-type='method'><a href="module-jobs.RateLimiter.html#setState">setState</a></li><li data-type='method'><a href="module-jobs.RateLimiter.html#wait">wait</a></li></ul></li><li><a href="module-jobs.RateLimiterGroup.html">RateLimiterGroup</a><ul class='methods'><li data-type='method'><a href="module-jobs.RateLimiterGroup.html#add">add</a></li><li data-type='method'><a href="module-jobs.RateLimiterGroup.html#increment">increment</a></li><li data-type='method'><a href="module-jobs.RateLimiterGroup.html#wait">wait</a></li></ul></li><li><a href="module-locks.Condition.html">Condition</a><ul class='methods'><li data-type='method'><a href="module-locks.Condition.html#notify">notify</a></li><li data-type='method'><a href="module-locks.Condition.html#notifyAll">notifyAll</a></li><li data-type='method'><a href="module-locks.Condition.html#wait">wait</a></li></ul></li><li><a href="module-locks.Event.html">Event</a><ul class='methods'><li data-type='method'><a href="module-locks.Event.html#clear">clear</a></li><li data-type='method'><a href="module-locks.Event.html#isSet">isSet</a></li><li data-type='method'><a href="module-locks.Event.html#set">set</a></li><li data-type='method'><a href="module-locks.Event.html#wait">wait</a></li></ul></li><li><a href="module-locks.Lock.html">Lock</a><ul class='methods'><li data-type='method'><a href="module-locks.Lock.html#acquire">acquire</a></li><li data-type='method'><a href="module-locks.Lock.html#locked">locked</a></li><li data-type='method'><a href="module-locks.Lock.html#release">release</a></li></ul></li><li><a href="module-locks.Semaphore.html">Semaphore</a><ul class='methods'><li data-type='method'><a href="module-locks.Semaphore.html#acquire">acquire</a></li><li data-type='method'><a href="module-locks.Semaphore.html#locked">locked</a></li><li data-type='method'><a href="module-locks.Semaphore.html#release">release</a></li></ul></li><li><a href="module-queues.LifoQueue.html">LifoQueue</a></li><li><a href="module-queues.PriorityQueue.html">PriorityQueue</a><ul class='methods'><li data-type='method'><a href="module-queues.PriorityQueue.html#put">put</a></li></ul></li><li><a href="module-queues.Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="module-queues.Queue.html#empty">empty</a></li><li data-type='method'><a href="module-queues.Queue.html#full">full</a></li><li data-type='method'><a href="module-queues.Queue.html#get">get</a></li><li data-type='method'><a href="module-queues.Queue.html#join">join</a></li><li data-type='method'><a href="module-queues.Queue.html#maxsize">maxsize</a></li><li data-type='method'><a href="module-queues.Queue.html#put">put</a></li><li data-type='method'><a href="module-queues.Queue.html#qsize">qsize</a></li><li data-type='method'><a href="module-queues.Queue.html#taskDone">taskDone</a></li></ul></li><li><a href="module-queues.QueueEmpty.html">QueueEmpty</a></li><li><a href="module-queues.QueueFull.html">QueueFull</a></li></ul><h3>Modules</h3><ul><li><a href="module-futures.html">futures</a></li><li><a href="module-jobs.html">jobs</a></li><li><a href="module-locks.html">locks</a></li><li><a href="module-queues.html">queues</a></li></ul><h3>Externals</h3><ul><li><a href="external-Error.html">Error</a></li><li><a href="external-Promise.html">Promise</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">RateLimiter</h1>
    

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="module-jobs.html">jobs</a>.</span>
        
        RateLimiter
        </h2>
        
            <div class="class-description usertext">An extensible rate limiter that can be used to prevent abuse of external
services or limited resources.  The storage methods are intended for override
to support rate limiting across multiple sessions or devices if you have a
shared storage backing.</div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="RateLimiter"><span class="type-signature"></span>new RateLimiter<span class="signature">(label, spec)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line128">line 128</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The unique label used for singleton uses and storage keys.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>spec</code></td>
            

            <td class="type">
            
                
<span class="param-type">RateLimiterSpec</span>


            
            </td>

            

            

            <td class="description last">The configuration for this limiter.</td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".singleton"><span class="type-signature">(async, static) </span>singleton<span class="signature">(label, spec)</span><span class="type-signature"> &rarr; {RateLimiter}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Create or return an existing instance.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Unique identifier for this singleton.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>spec</code></td>
            

            <td class="type">
            
                
<span class="param-type">RateLimiterSpec</span>


            
            </td>

            

            

            <td class="description last">The spec to be used if, and only if, a new instance is created.</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    A new or existing instance.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">RateLimiter</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getState"><span class="type-signature">(async, abstract) </span>getState<span class="signature">()</span><span class="type-signature"> &rarr; {Object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line160">line 160</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Subclasses can override to use permanent storage like IndexedDB.  Otherwise
state is just local to this instance.
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    Meta data about the current usage
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="increment"><span class="type-signature"></span>increment<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Increment use of the rate limiter.  This indicates that a usage occurred and the limit
should respond accordingly for the next, or existing, calls to <code>RateLimter#wait</code>.
</div>




























        
            

    

    <h4 class="name" id="setState"><span class="type-signature">(async, abstract) </span>setState<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line170">line 170</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Subclasses can override to use permanent storage like IndexedDB.  Otherwise
state is just local to this instance.
</div>




























        
            

    

    <h4 class="name" id="wait"><span class="type-signature">(async, abstract) </span>wait<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line180">line 180</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Blocks until it is safe to run again.  Note that this routine is concurrency-safe, so some
calls for a given context may block longer than expected because of multiple accesses.
</div>




























        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>

<link type="text/css" rel="stylesheet" href="../../css/jsdoc-overrides.css"/>
<script src="../../js/jsdoc-overrides.js"></script>