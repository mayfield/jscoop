<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>UnorderedWorkQueue - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Condition.html">Condition</a><ul class='methods'><li data-type='method'><a href="Condition.html#acquire">acquire</a></li><li data-type='method'><a href="Condition.html#locked">locked</a></li><li data-type='method'><a href="Condition.html#notify">notify</a></li><li data-type='method'><a href="Condition.html#notifyAll">notifyAll</a></li><li data-type='method'><a href="Condition.html#release">release</a></li><li data-type='method'><a href="Condition.html#wait">wait</a></li></ul></li><li><a href="Event.html">Event</a><ul class='methods'><li data-type='method'><a href="Event.html#clear">clear</a></li><li data-type='method'><a href="Event.html#isSet">isSet</a></li><li data-type='method'><a href="Event.html#set">set</a></li><li data-type='method'><a href="Event.html#wait">wait</a></li></ul></li><li><a href="Future.html">Future</a><ul class='methods'><li data-type='method'><a href="Future.html#done">done</a></li><li data-type='method'><a href="Future.html#error">error</a></li><li data-type='method'><a href="Future.html#result">result</a></li><li data-type='method'><a href="Future.html#setError">setError</a></li><li data-type='method'><a href="Future.html#setResult">setResult</a></li></ul></li><li><a href="LifoQueue.html">LifoQueue</a><ul class='methods'><li data-type='method'><a href="LifoQueue.html#_get">_get</a></li><li data-type='method'><a href="LifoQueue.html#_put">_put</a></li><li data-type='method'><a href="LifoQueue.html#empty">empty</a></li><li data-type='method'><a href="LifoQueue.html#full">full</a></li><li data-type='method'><a href="LifoQueue.html#get">get</a></li><li data-type='method'><a href="LifoQueue.html#getNoWait">getNoWait</a></li><li data-type='method'><a href="LifoQueue.html#join">join</a></li><li data-type='method'><a href="LifoQueue.html#maxsize">maxsize</a></li><li data-type='method'><a href="LifoQueue.html#put">put</a></li><li data-type='method'><a href="LifoQueue.html#putNoWait">putNoWait</a></li><li data-type='method'><a href="LifoQueue.html#qsize">qsize</a></li><li data-type='method'><a href="LifoQueue.html#taskDone">taskDone</a></li></ul></li><li><a href="Lock.html">Lock</a><ul class='methods'><li data-type='method'><a href="Lock.html#acquire">acquire</a></li><li data-type='method'><a href="Lock.html#locked">locked</a></li><li data-type='method'><a href="Lock.html#release">release</a></li></ul></li><li><a href="PriorityQueue.html">PriorityQueue</a><ul class='methods'><li data-type='method'><a href="PriorityQueue.html#_get">_get</a></li><li data-type='method'><a href="PriorityQueue.html#_put">_put</a></li><li data-type='method'><a href="PriorityQueue.html#empty">empty</a></li><li data-type='method'><a href="PriorityQueue.html#full">full</a></li><li data-type='method'><a href="PriorityQueue.html#get">get</a></li><li data-type='method'><a href="PriorityQueue.html#getNoWait">getNoWait</a></li><li data-type='method'><a href="PriorityQueue.html#join">join</a></li><li data-type='method'><a href="PriorityQueue.html#maxsize">maxsize</a></li><li data-type='method'><a href="PriorityQueue.html#put">put</a></li><li data-type='method'><a href="PriorityQueue.html#putNoWait">putNoWait</a></li><li data-type='method'><a href="PriorityQueue.html#qsize">qsize</a></li><li data-type='method'><a href="PriorityQueue.html#taskDone">taskDone</a></li></ul></li><li><a href="Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="Queue.html#_get">_get</a></li><li data-type='method'><a href="Queue.html#_put">_put</a></li><li data-type='method'><a href="Queue.html#empty">empty</a></li><li data-type='method'><a href="Queue.html#full">full</a></li><li data-type='method'><a href="Queue.html#get">get</a></li><li data-type='method'><a href="Queue.html#getNoWait">getNoWait</a></li><li data-type='method'><a href="Queue.html#join">join</a></li><li data-type='method'><a href="Queue.html#maxsize">maxsize</a></li><li data-type='method'><a href="Queue.html#put">put</a></li><li data-type='method'><a href="Queue.html#putNoWait">putNoWait</a></li><li data-type='method'><a href="Queue.html#qsize">qsize</a></li><li data-type='method'><a href="Queue.html#taskDone">taskDone</a></li></ul></li><li><a href="QueueEmpty.html">QueueEmpty</a></li><li><a href="QueueFull.html">QueueFull</a></li><li><a href="RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method'><a href="RateLimiter.html#.singleton">singleton</a></li><li data-type='method'><a href="RateLimiter.html#getState">getState</a></li><li data-type='method'><a href="RateLimiter.html#setState">setState</a></li><li data-type='method'><a href="RateLimiter.html#wait">wait</a></li></ul></li><li><a href="RateLimiterGroup.html">RateLimiterGroup</a><ul class='methods'><li data-type='method'><a href="RateLimiterGroup.html#add">add</a></li><li data-type='method'><a href="RateLimiterGroup.html#wait">wait</a></li></ul></li><li><a href="Semaphore.html">Semaphore</a><ul class='methods'><li data-type='method'><a href="Semaphore.html#acquire">acquire</a></li><li data-type='method'><a href="Semaphore.html#locked">locked</a></li><li data-type='method'><a href="Semaphore.html#release">release</a></li></ul></li><li><a href="UnorderedWorkQueue.html">UnorderedWorkQueue</a><ul class='methods'><li data-type='method'><a href="UnorderedWorkQueue.html#asCompleted">asCompleted</a></li><li data-type='method'><a href="UnorderedWorkQueue.html#fulfilled">fulfilled</a></li><li data-type='method'><a href="UnorderedWorkQueue.html#get">get</a></li><li data-type='method'><a href="UnorderedWorkQueue.html#pending">pending</a></li><li data-type='method'><a href="UnorderedWorkQueue.html#put">put</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-Array.html">Array</a></li><li><a href="external-Error.html">Error</a></li><li><a href="external-Promise.html">Promise</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">UnorderedWorkQueue</h1>
    

    




<section>

<header>
    
        <h2>
        UnorderedWorkQueue
        </h2>
        
            <div class="class-description usertext">A job control system that permits up to a fixed number of jobs (awaitables)
to remain unfulfilled before blocking a producer from enqueueing any more work.
In effect it provides a simple way to build a producer/consumer pattern with
some regulation on the number of tasks the producer should enqueue based on
fulfillment of the work.  The results of each enqueue job are yielded in the
order they finish, not the order they are enqueued.</div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="UnorderedWorkQueue"><span class="type-signature"></span>new UnorderedWorkQueue<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const sleep = ms => new Promise(r => setTimeout(r, ms));
const wq = new UnorderedWorkQueue({maxPending: 3});
await wq.put(sleep(1000));
await wq.put(sleep(1000));
await wq.put(sleep(1000));
await wq.put(sleep(1000)); // blocks for ~1 second waiting
for await (const _ of wq) {
   // Handle results...
}</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#UnorderedWorkQueueOptions">UnorderedWorkQueueOptions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Unordered work queue options.</td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
        <h3 class="subsection-title">Classes</h3>

        <dl>
            <dt><a href="UnorderedWorkQueue.html">UnorderedWorkQueue</a></dt>
            <dd></dd>
        </dl>
    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="asCompleted"><span class="type-signature">(async, generator) </span>asCompleted<span class="signature">()</span><span class="type-signature"> &rarr; {*}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    An async generator that yields the results of completed tasks.  Note that the
<a href="UnorderedWorkQueue.html"><code>UnorderedWorkQueue</code></a> instance itself is also iterable and produces the same
results.
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const wq = new UnorderedWorkQueue(10);
wq.put(1);
wq.put(2);
for await (const x of wq.asCompleted()) {
  console.log(x); // 1
                  // 2
}

// or...
wq.put(1);
wq.put(2);
for await (const x of wq) {
  console.log(x); // 1
                  // 2
}</code></pre>



















		
<h5>Yields:</h5>		
		
        
<div class="param-desc">
    Return values from completed jobs as soon as they are ready.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>
		
    

        
            

    

    <h4 class="name" id="fulfilled"><span class="type-signature"></span>fulfilled<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line118">line 118</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





























<h5>Returns:</h5>

        
<div class="param-desc">
    Jobs that are finished but have not be retrieved yet.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="get"><span class="type-signature">(async) </span>get<span class="signature">()</span><span class="type-signature"> &rarr; {*}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line94">line 94</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="Queue.html#get"><code>Queue.get</code></a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Get one result from the fulfilled queue.
</div>























<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc usertext">
        If <a href="global.html#UnorderedWorkQueueOptions"><code>options.allowErrors</code></a> is unset and the
            job failed.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl class="param-type">
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">*</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    The return value from a completed job.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="pending"><span class="type-signature"></span>pending<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line111">line 111</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





























<h5>Returns:</h5>

        
<div class="param-desc">
    Jobs that have not finished yet or can not be retrieved yet.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="put"><span class="type-signature">(async) </span>put<span class="signature">(promise)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jobs.js.html">jobs.js</a>, <a href="jobs.js.html#line58">line 58</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Add a new job to the work queue immediately if a spot is available.  If
the pending queue or the fulfilled queues are full it will block.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>promise</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="external-Promise.html">external:Promise</a></span>


            
            </td>

            

            

            <td class="description last">The awaitable to enqueue.</td>
        </tr>

    
    </tbody>
</table>



















        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>

<link type="text/css" rel="stylesheet" href="../../css/jsdoc-overrides.css"/>
<script src="../../js/jsdoc-overrides.js"></script>